# 基金分析工具使用说明

## 功能概述

这个工具可以分析不同类型的基金数据，筛选出优质基金并保存前10名到CSV文件。

## 使用步骤

### 1. 首先爬取数据

```bash
# 爬取所有类型的基金数据
python3 fund_data_scraper.py 5

# 或者爬取特定类型
python3 fund_data_scraper.py 1,2,3,4
```

### 2. 运行分析工具

```bash
python3 index.py
```

## 输出文件

分析工具会在 `data/YYYYMM/` 目录下生成以下文件：

### 各类型前10名基金
- `top10_tzs_指数型.csv` - 指数型基金前10名
- `top10_tgp_股票型.csv` - 股票型基金前10名
- `top10_thh_混合型.csv` - 混合型基金前10名
- `top10_tzq_债券型.csv` - 债券型基金前10名

### 合并分析结果
- `top10_combined_all_types.csv` - 所有类型合并后的前10名
- `top10_tzs_指数型_from_combined.csv` - 从合并数据中提取的指数型前10名
- `top10_tgp_股票型_from_combined.csv` - 从合并数据中提取的股票型前10名
- `top10_thh_混合型_from_combined.csv` - 从合并数据中提取的混合型前10名
- `top10_tzq_债券型_from_combined.csv` - 从合并数据中提取的债券型前10名

## 分析指标

### 综合评分计算
```python
收益评分 = (近3年收益率 / 最大值) * 40
风险评分 = (风险调整收益 / 最大值) * 30
费率评分 = (1 - 手续费 / 最大值) * 20
综合评分 = 收益评分 + 风险评分 + 费率评分
```

### 风险调整收益计算
- **方法1**：使用波动率（推荐）
  ```python
  波动率 = 标准差(近1年, 近6月, 近3月, 近1月)
  风险调整收益 = 近3年收益率 / (波动率 + 0.01)
  ```
- **方法2**：使用手续费作为风险代理
  ```python
  风险调整收益 = 近3年收益率 / (手续费 + 1)
  ```

## 示例输出

```
基金分析工具
==================================================
分析目录: data/202501
==================================================

==================================================
正在分析: 指数型 (tzs)
文件: data/202501/fund_ranking_tzs_指数型.csv
==================================================
共获取 1250 只指数型基金
可用的波动率计算列: ['近1年', '近6月', '近3月', '近1月']
使用波动率计算风险调整收益
筛选出前10只优质指数型基金:
    基金代码    基金简称  综合评分
0   000001  华夏成长  85.23
1   000002  华夏回报  82.15
...
前10名指数型基金已保存到: data/202501/top10_tzs_指数型.csv

==================================================
正在分析: 股票型 (tgp)
文件: data/202501/fund_ranking_tgp_股票型.csv
==================================================
...

==================================================
合并所有类型的前10名基金
==================================================
总共筛选出 40 只优质基金

前20名基金:
    基金代码    基金简称  基金类型  综合评分
0   000001  华夏成长    指数型  85.23
1   000002  华夏回报    指数型  82.15
...

合并后的前10名基金已保存到: data/202501/top10_combined_all_types.csv
指数型前10名（从合并数据中）已保存到: data/202501/top10_tzs_指数型_from_combined.csv
...

==================================================
分析完成！
所有结果文件保存在: data/202501
==================================================
```

## 注意事项

1. **数据依赖**：必须先运行 `fund_data_scraper.py` 爬取数据
2. **文件路径**：确保数据文件在正确的目录下
3. **数据质量**：分析结果取决于爬取数据的完整性和准确性
4. **评分模型**：可以根据需要调整评分权重和计算方法

## 文件结构

```
data/
└── 202501/
    ├── fund_ranking_tzs_指数型.csv          # 原始数据
    ├── fund_ranking_tgp_股票型.csv
    ├── fund_ranking_thh_混合型.csv
    ├── fund_ranking_tzq_债券型.csv
    ├── top10_tzs_指数型.csv                 # 分析结果
    ├── top10_tgp_股票型.csv
    ├── top10_thh_混合型.csv
    ├── top10_tzq_债券型.csv
    ├── top10_combined_all_types.csv         # 合并结果
    ├── top10_tzs_指数型_from_combined.csv
    ├── top10_tgp_股票型_from_combined.csv
    ├── top10_thh_混合型_from_combined.csv
    └── top10_tzq_债券型_from_combined.csv
``` 